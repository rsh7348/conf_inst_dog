using System.Text.Json;

namespace Solution
{
    public class SimpleTaskManagementSystem : SimpleTaskManagementSystemBase
    {
        private int nextId = 1;
        private Dictionary<string, (string Name, int Priority)> tasks = new Dictionary<string, (string Name, int Priority)>();

        public override string AddTask(string name, int priority)
        {
            string id = $"task.id{nextId}";
            tasks[id] = (name, priority);
            nextId++;
            return id;
        }

        public override bool UpdateTask(string taskId, string name, int priority)
        {
            if (!tasks.ContainsKey(taskId))
            {
                return false;
            }
            tasks[taskId] = (name, priority);
            return true;
        }

        public override string? GetTask(string taskId)
        {
            if (!tasks.TryGetValue(taskId, out var taskDetails))
            {
                return null;
            }
            var taskObj = new { name = taskDetails.Name, priority = taskDetails.Priority };
            return JsonSerializer.Serialize(taskObj);
        }
    }
}